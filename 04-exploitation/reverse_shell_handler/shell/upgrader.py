"""Shell upgrade utilities"""

import time
from ..config import PTY_UPGRADE_METHODS, TTY_STABILIZATION_STEPS

class ShellUpgrader:
    """Upgrade basic shell to fully interactive PTY"""
    
    def __init__(self, communicator):
        self.communicator = communicator
    
    def upgrade_to_pty(self):
        """Upgrade shell to fully interactive PTY"""
        print("\n[*] Attempting to upgrade shell to PTY...")
        
        # Try Python PTY upgrade
        print("[*] Trying Python PTY upgrade...")
        self.communicator.send_command(PTY_UPGRADE_METHODS[0])
        
        time.sleep(1)
        
        # Print stabilization instructions
        print("\n[!] Next steps for full TTY:")
        for step in TTY_STABILIZATION_STEPS:
            print(f"    {step}")
        
        # Try alternative methods
        print("\n[*] Alternative Python3 upgrade:")
        self.communicator.send_command(PTY_UPGRADE_METHODS[1])
        
        print("\n[*] Alternative script upgrade:")
        self.communicator.send_command(PTY_UPGRADE_METHODS[2])